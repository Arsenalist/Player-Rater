/*! player-rater 24-12-2013 */
jQuery(document).ready(function(a){var b,c;return window.addEventListener("message",function(a){var d;switch(d=JSON.parse(a.data),d.type){case"record-grade":return c(d);case"populate-grades":return b(d)}}),b=function(b){var c,d,e;return e=b.data.team_id,c=b.data.game_id,d={team_id:e,game_id:c},a.ajax({url:"/rating",data:d,type:"POST",dataType:"json"}).done(function(a){return b={type:"display-grades",data:{grades:a}},window.parent.postMessage(JSON.stringify(b),"*")})},c=function(b){var c;return c=b.data,a.ajax({url:"/vote",data:c,type:"POST",dataType:"json"}).done(function(a){return b={type:"updated-grade",data:{grade:a.grade,player_id:c.player_id,count:a.count}},window.parent.postMessage(JSON.stringify(b),"*")})}});